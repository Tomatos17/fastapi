# Body - Множественные параметры

Теперь, когда мы увидели, как использовать `Path` и `Query`, давайте рассмотрим более продвинутые способы объявления тела запроса.

## Объединение `Path`, `Query` и параметров тела

Во-первых, конечно, вы можете свободно объединять параметры `Path`, `Query` и объявления параметров тела, и **FastAPI** поймет, что с ними делать.

Вы также можете объявлять параметры тела как необязательные, установив значение по умолчанию `None`:

{* ../../docs_src/body_multiple_params/tutorial001_an_py310.py hl[18:20] *}

/// note | Заметка

Обратите внимание, что в этом случае `item`, который будет взят из тела, является необязательным, так как имеет значение по умолчанию `None`.

///

## Множественные параметры тела

В предыдущем примере *операции пути* ожидали, что тело запроса будет в формате JSON с атрибутами объекта `Item`, например:

```JSON
{
    "name": "Foo",
    "description": "The pretender",
    "price": 42.0,
    "tax": 3.2
}
```

Но вы также можете объявить несколько параметров тела, например, `item` и `user`:

{* ../../docs_src/body_multiple_params/tutorial002_py310.py hl[20] *}

В этом случае **FastAPI** заметит, что в функции более одного параметра тела (оба являются моделями Pydantic).

Следовательно, имена параметров будут использоваться как ключи (имена полей) в теле, и будет ожидаться тело такого вида:

```JSON
{
    "item": {
        "name": "Foo",
        "description": "The pretender",
        "price": 42.0,
        "tax": 3.2
    },
    "user": {
        "username": "dave",
        "full_name": "Dave Grohl"
    }
}
```

/// note | Примечание

Обратите внимание, что хотя `item` был объявлен так же, как и раньше, теперь он ожидается внутри тела с ключом `item`.

///

**FastAPI** выполнит автоматическое преобразование из запроса, так что параметр `item` получит своё конкретное содержимое, и то же самое произойдет с `user`.

Он выполнит проверку составных данных и задокументирует это в схеме OpenAPI и автоматической документации.

## Отдельные значения в теле

Так же, как существуют `Query` и `Path` для определения дополнительных данных для query и path параметров, **FastAPI** предоставляет эквивалент для тела - `Body`.

Например, расширяя предыдущую модель, вы можете решить, что вам нужен еще один ключ `importance` в том же теле, кроме параметров `item` и `user`.

Если вы объявите это без указания объекта (Path, Query, Body и т.д.), то, поскольку это является простым типом данных, **FastAPI** рассмотрит это как query-параметр.

Но вы можете указать **FastAPI** обрабатывать его, как ещё один ключ тела, используя `Body`:

{* ../../docs_src/body_multiple_params/tutorial003_an_py310.py hl[23] *}

В этом случае **FastAPI** будет ожидать тело такого вида:

```JSON
{
    "item": {
        "name": "Foo",
        "description": "The pretender",
        "price": 42.0,
        "tax": 3.2
    },
    "user": {
        "username": "dave",
        "full_name": "Dave Grohl"
    },
    "importance": 5
}
```

И снова, он преобразует типы данных, проверит, задокументирует и т.д.

## Множественные параметры тела и query

Конечно, вы также можете объявить дополнительные query-параметры, когда это необходимо, дополнительно к любым параметрам тела.

Поскольку по умолчанию, отдельные значения интерпретируются как query-параметры, вам не нужно явно добавлять `Query`, вы можете просто сделать так:

```Python
q: Union[str, None] = None
```

Или в Python 3.10 и выше:

```Python
q: str | None = None
```

Например:

{* ../../docs_src/body_multiple_params/tutorial004_an_py310.py hl[28] *}

/// info | Информация

`Body` также имеет все те же дополнительные параметры валидации и метаданные, как `Query`, `Path` и другие, которые вы увидите позже.

///

## Встраивание одного параметра тела

Предположим, у вас есть только один параметр тела `item` из модели Pydantic `Item`.

По умолчанию **FastAPI** ожидает получить тело запроса напрямую.

Но если вы хотите, чтобы он ожидал JSON с ключом `item`, внутри которого будет содержимое модели, как это происходит при объявлении дополнительных параметров тела, вы можете использовать специальный параметр `embed` типа `Body`:

```Python
item: Item = Body(embed=True)
```

пример:

{* ../../docs_src/body_multiple_params/tutorial005_an_py310.py hl[17] *}

В этом случае **FastAPI** будет ожидать тело запроса в формате:

```JSON hl_lines="2"
{
    "item": {
        "name": "Foo",
        "description": "The pretender",
        "price": 42.0,
        "tax": 3.2
    }
}
```

вместо:

```JSON
{
    "name": "Foo",
    "description": "The pretender",
    "price": 42.0,
    "tax": 3.2
}
```

## Резюме

Вы можете добавлять несколько параметров тела для вашей *функции операции пути*, даже если запрос может содержать только одно тело.

**FastAPI** справится с этим, предоставит вам правильные данные в вашей функции, проведет валидацию и документирование правильной схемы в *операции пути*.

Вы также можете объявлять отдельные значения для получения в рамках тела запроса.

И вы можете указать **FastAPI** встраивать тело запроса в ключ, даже если объявлен только один параметр.
