# Шаблоны

Вы можете использовать любой механизм шаблонов с **FastAPI**.

Распространенным выбором является Jinja2, тот же, что используется в Flask и других инструментах.

Есть утилиты для легкой конфигурации, которые вы можете использовать непосредственно в вашем приложении **FastAPI** (предоставлено Starlette).

## Установка зависимостей

Убедитесь, что вы создаете [виртуальное окружение](../virtual-environments.md){.internal-link target=_blank}, активируйте его и установите `jinja2`:

<div class="termy">

```console
$ pip install jinja2

---> 100%
```

</div>

## Использование `Jinja2Templates`

* Импортируйте `Jinja2Templates`.
* Создайте объект `templates`, который можно будет использовать позже.
* Объявите параметр `Request` в *операции маршрута*, который будет возвращать шаблон.
* Используйте созданные вами `templates`, чтобы рендерить и возвращать `TemplateResponse`, передавая имя шаблона, объект запроса и "контекст" — словарь с парами ключ-значение, которые будут использоваться внутри шаблона Jinja2.

{* ../../docs_src/templates/tutorial001.py hl[4,11,15:18] *}

/// note | Примечание

До версии FastAPI 0.108.0 и Starlette 0.29.0 первым параметром был `name`.

Также до этого, в предыдущих версиях, объект `request` передавался как часть пар ключ-значение в контексте для Jinja2.

///

/// tip | Совет

Объявляя `response_class=HTMLResponse`, интерфейс документов сможет знать, что ответ будет в формате HTML.

///

/// note | Технические подробности

Вы также можете использовать `from starlette.templating import Jinja2Templates`.

**FastAPI** предоставляет ту же `starlette.templating` под именем `fastapi.templating` просто для вашего удобства, разработчика. Но большинство доступных ответов напрямую из Starlette. То же самое с `Request` и `StaticFiles`.

///

## Написание шаблонов

Затем вы можете написать шаблон в `templates/item.html` с, например:

```jinja hl_lines="7"
{!../../docs_src/templates/templates/item.html!}
```

### Контекстные значения шаблона

В HTML, который содержит:

{% raw %}

```jinja
Item ID: {{ id }}
```

{% endraw %}

...это отобразит `id`, взятый из "контекста" `dict`, который вы передали:

```Python
{"id": id}
```

Например, с ID `42`, это отобразится как:

```html
Item ID: 42
```

### Аргументы `url_for` в шаблоне

Вы также можете использовать `url_for()` внутри шаблона, он принимает в качестве аргументов те же аргументы, которые будут использованы вашей *функцией операции маршрута*.

Таким образом, секция с:

{% raw %}

```jinja
<a href="{{ url_for('read_item', id=id) }}">
```

{% endraw %}

...создаст ссылку на тот же URL, который будет обрабатываться *функцией операции маршрута* `read_item(id=id)`.

Например, с ID `42`, это отобразится как:

```html
<a href="/items/42">
```

## Шаблоны и статичные файлы

Вы также можете использовать `url_for()` внутри шаблона, и использовать его, например, с `StaticFiles`, которые вы закрепили с `name="static"`.

```jinja hl_lines="4"
{!../../docs_src/templates/templates/item.html!}
```

В этом примере это бы связало с файлом CSS в `static/styles.css` с:

```CSS hl_lines="4"
{!../../docs_src/templates/static/styles.css!}
```

И поскольку вы используете `StaticFiles`, этот CSS-файл будет автоматически обслуживаться вашим приложением **FastAPI** по URL `/static/styles.css`.

## Подробнее

Для получения более подробной информации, включая тестирование шаблонов, посетите <a href="https://www.starlette.io/templates/" class="external-link" target="_blank">документацию Starlette по шаблонам</a>.
