# Шаблоны

Вы можете использовать любой шаблонизатор, который захотите, с **FastAPI**.

Популярным выбором является Jinja2, который также используется Flask и другими инструментами.

Существуют утилиты для его простой настройки, которые вы можете использовать непосредственно в своем приложении **FastAPI** (предоставлено Starlette).

## Установка зависимостей

Убедитесь, что вы создали [виртуальное окружение](../virtual-environments.md){.internal-link target=_blank}, активировали его и установили `jinja2`:

<div class="termy">

```console
$ pip install jinja2

---> 100%
```

</div>

## Использование `Jinja2Templates`

* Импортируйте `Jinja2Templates`.
* Создайте объект `templates`, который вы сможете повторно использовать позднее.
* Объявите параметр `Request` в *операции пути*, которая будет возвращать шаблон.
* Используйте созданные вами `templates` для рендеринга и возврата `TemplateResponse`, передайте имя шаблона, объект запроса и словарь "context" с парами "ключ-значение", которые будут использоваться внутри шаблона Jinja2.

{* ../../docs_src/templates/tutorial001.py hl[4,11,15:18] *}

/// note | Примечание

До FastAPI 0.108.0, Starlette 0.29.0, параметр `name` был первым.

Также, до этого, в предыдущих версиях объект `request` передавался как часть пар ключ-значение в контексте для Jinja2.

///

/// tip | Совет

Объявляя `response_class=HTMLResponse`, интерфейс документации сможет определить, что ответ будет в формате HTML.

///

/// note | Технические детали

Вы также можете использовать `from starlette.templating import Jinja2Templates`.

**FastAPI** предоставляет тот же `starlette.templating` как `fastapi.templating` просто для вашего удобства, разработчик. Но большинство доступных ответов поступают непосредственно от Starlette. То же самое касается `Request` и `StaticFiles`.

///

## Написание шаблонов

Затем вы можете написать шаблон в `templates/item.html`, например:

```jinja hl_lines="7"
{!../../docs_src/templates/templates/item.html!}
```

### Значения контекста шаблона

В HTML, который содержит:

{% raw %}

```jinja
Item ID: {{ id }}
```

{% endraw %}

...будет показан `id`, взятый из "context" `dict`, который вы передали:

```Python
{"id": id}
```

Например, с `id`, равным `42`, это будет рендериться как:

```html
Item ID: 42
```

### Аргументы `url_for` в шаблоне

Вы также можете использовать `url_for()` внутри шаблона; он принимает в качестве аргументов те же аргументы, которые использовались бы в вашей *функции-обработчике пути*.

Таким образом, раздел с:

{% raw %}

```jinja
<a href="{{ url_for('read_item', id=id) }}">
```

{% endraw %}

...сгенерирует ссылку на тот же URL, который был бы обработан *функцией-обработчиком пути* `read_item(id=id)`.

Например, с `id`, равным `42`, это будет рендериться как:

```html
<a href="/items/42">
```

## Шаблоны и статические файлы

Вы также можете использовать `url_for()` внутри шаблона и использовать его, например, с `StaticFiles`, которые вы смонтировали с `name="static"`.

```jinja hl_lines="4"
{!../../docs_src/templates/templates/item.html!}
```

В этом примере это будет ссылка на CSS-файл по пути `static/styles.css` с:

```CSS hl_lines="4"
{!../../docs_src/templates/static/styles.css!}
```

И поскольку вы используете `StaticFiles`, этот CSS-файл будет автоматически обслуживаться вашим приложением **FastAPI** по URL `/static/styles.css`.

## Дополнительные сведения

Для получения дополнительной информации, включая тестирование шаблонов, смотрите <a href="https://www.starlette.io/templates/" class="external-link" target="_blank">документацию Starlette по шаблонам</a>.
