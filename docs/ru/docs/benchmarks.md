# Бенчмарки

Независимые бенчмарки (тесты производительности) от TechEmpower показывают, что приложения **FastAPI**, работающие под Uvicorn, <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">являются одними из самых быстрых Python-фреймворков</a>, уступающие только самим Starlette и Uvicorn (которые используются внутренне в FastAPI).

Но при просмотре бенчмарков и сравнений следует учитывать следующее.

## Бенчмарки и скорость

Когда вы просматриваете бенчмарки, часто можно увидеть, как сравниваются несколько инструментов разных типов как эквивалентные.

В частности, часто сравнивают вместе Uvicorn, Starlette и FastAPI (среди многих других инструментов).

Чем проще проблема, которую решает инструмент, тем лучше будет его производительность. И большинство бенчмарков не тестируют дополнительные функции, предоставляемые инструментом.

Иерархия выглядит следующим образом:

* **Uvicorn**: ASGI-сервер
    * **Starlette**: (использует Uvicorn) веб-микрофреймворк
        * **FastAPI**: (использует Starlette) API-микрофреймворк с несколькими дополнительными возможностями для создания API, включая валидацию данных и т.д.

* **Uvicorn**:
    * Будет иметь наилучшую производительность, так как в нем нет большого количества дополнительного кода, кроме самого сервера.
    * Вы не будете писать приложение непосредственно на Uvicorn. Это означало бы, что ваш код должен включать как минимум весь код, предоставляемый Starlette (или **FastAPI**). И если бы вы это сделали, ваше конечное приложение имело бы те же накладные расходы, как если бы вы использовали фреймворк, и минимизировало бы ваш код и ошибки.
    * Если вы сравниваете Uvicorn, сравнивайте его с Daphne, Hypercorn, uWSGI и другими серверными приложениями.

* **Starlette**:
    * Будет иметь следующую по производительности позицию после Uvicorn. Фактически, Starlette использует Uvicorn для выполнения. Таким образом, он может быть "медленнее" Uvicorn из-за выполнения большего количества кода.
    * Но он предоставляет вам инструменты для создания простых веб-приложений с маршрутизацией на основе путей и т.д.
    * Если вы сравниваете Starlette, сравнивайте его с Sanic, Flask, Django и другими веб-фреймворками (или микрофреймворками).

* **FastAPI**:
    * Так же, как Starlette использует Uvicorn и не может быть быстрее его, **FastAPI** использует Starlette, поэтому не может быть быстрее его.
    * FastAPI предоставляет больше возможностей поверх Starlette. Возможности, которые вам почти всегда нужны при создании API, такие как валидация и сериализация данных. И при использовании FastAPI вы получаете автоматическую документацию бесплатно (автоматическая документация даже не добавляет накладные расходы на выполнение приложений, она создается при запуске).
    * Если бы вы не использовали FastAPI и использовали Starlette напрямую (или другой инструмент, такой как Sanic, Flask, Responder и т.д.), вам пришлось бы реализовать всю валидацию и сериализацию данных самостоятельно. Таким образом, ваше конечное приложение все равно имело бы те же накладные расходы, как если бы оно было создано с использованием FastAPI. И во многих случаях валидация данных и их сериализация составляют наибольшую часть кода, написанного в приложениях.
    * Таким образом, используя FastAPI, вы экономите время на разработку, снижаете вероятность ошибок, количество строк кода и, вероятно, получаете такую же производительность (или лучше), как если бы вы не использовали его (так как вам пришлось бы реализовать все в вашем коде).
    * Если вы сравниваете FastAPI, сравнивайте его с фреймворками веб-приложений (или наборами инструментов), которые обеспечивают валидацию данных, сериализацию и документацию, такими как Flask-apispec, NestJS, Molten и другие. Фреймворки с интегрированной автоматической валидацией данных, сериализацией и документацией.
